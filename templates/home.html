{% extends 'base.html' %}
{% block content %}
<script>
  $(function () {
    $('#datetimepickerUpper').datetimepicker();
 });
  $(function () {
    $('#datetimepickerLower').datetimepicker();
 });
  function delete_cookies() {
    document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); });
  }
</script>

  <br>
  <div class="row">

    <div class="col-sm-10">
    </div>

    <div class="col-sm-2">
      <!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal" style="background-color: #00acee">Cookie Warning</button>
      <!-- Modal -->
      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Cookie Warning</h4>
            </div>
            <div class="modal-body">
              <p>This website uses cookies to track search history for our users.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-info" data-dismiss="modal">Got it!</button>
            </div>
          </div>
        </div>
      </div>

      <br><br>

      <!-- put button here -->
      <form method="post">
        {% csrf_token %}
        <button type="button" class="btn btn-info"  style="background-color: #00acee" type="submit" onclick="delete_cookies()">Delete Cookies</button>
      </form>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-2">
    </div>

    <div class="col-sm-8">
      <!-- header temporary holder for logo-->
      <h1 style="text-align: center; padding-top: 150px; color: #00acee; font-family: 'Courier New', Times, monospace;"> tweetBot. </h1>

      <form method="GET" style="margin: 0; text-align: center;">
        {% csrf_token %}
        <input id="search" type="text" name="search" placeholder="Search Keyword" class="form-control mr-sm-0">
        {{ form.search.errors }}
        <input id="retweet_threshold" type="text" name="retweet_threshold" placeholder="Retweet Threshold" class="form-control mr-sm-0">
        {{ form.retweet_threshold.errors }}
        <input id="favorite_threshold" type="text" name="favorite_threshold" placeholder="Favorite Threshold" class="form-control mr-sm-0">
        {{ form.favorite_threshold.errors }}
        <div class='input-group date' id='datetimepickerLower'>
          <input id="date_threshold" type="text" name="date_threshold" placeholder="Date Threshold (only up to 7 days in the past)" class="form-control mr-sm-0">
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
        {{ form.date_threshold.errors }}
        <button id="search_submit" type="submit" class="btn aqua-gradient btn-rounded btn-sm my-sm-3" style="padding-bottom: 2px; padding-top: 2px">Search</button>
      </form>
    </div>

    <div style="padding-right: 0px;" class="col-sm-2">
    </div>
  </div>

  <!-- Breaks for style seperations reasons -->
  <br><br>

  <!-- columns divide page in 3 parts -->
  <div class="row">

    <div class="col-sm-1">
    </div>

  	<!-- Left column -->
    <!-- class was content-->
    <div class="col-sm-5">
      {% if searchBool == True %}
      
      <pre id="trendText"><u><b>{{ text }}</b></u></pre>

      <div id="left">
        {% for tweet_data in tweet_data_list %}
        <div class="panel panel-info">
          
          <div class="panel-heading">
            {% for key, value in tweet_data.items %}
              {% if key == 'User Name' %}
                <b>{{ value }} </b>
              {% endif %}
            {% endfor %}
            {% for key, value in tweet_data.items %}
              {% if key == 'Screen Name' %}
                <i>@{{ value }}</i>
              {% endif %}
            {% endfor %}
          </div>

          <div class="panel-body">
            {% for key, value in tweet_data.items %}
              {% if key == 'Tweet Text' %}
                {{ value }}
              {% endif %}
            {% endfor %}
          </div>

          <div class="panel-footer">
            {% for key, value in tweet_data.items %}
              {% if key == 'Retweet Count' %}
                <b>{{ value }} </b>Retweets
              {% endif %}
            {% endfor %}

            {% for key, value in tweet_data.items %}
              {% if key == 'Favorite Count' %}
                <b>{{ value }} </b>Likes
              {% endif %}
            {% endfor %}

            <br>

            {% for key, value in tweet_data.items %}
              {% if key == 'Tweet Polarity' %}
                {% if value > 0 %}
                  <b style="color: green">{{ value }} </b>Polarity
                {% elif value < 0 %}
                  <b style="color: firebrick">{{ value }} </b>Polarity
                {% else %}
                  <b>{{ value }} </b>Polarity
                {% endif %}
              {% endif %}
            {% endfor %}

            {% for key, value in tweet_data.items %}
              {% if key == 'Tweet Subjectivity' %}
                <b>{{ value }} </b>Subjectivity
              {% endif %}
            {% endfor %}

            <br>

            {% for key, value in tweet_data.items %}
              {% if key == 'Tweet Created At' %}
                <i>{{ value }} </i>
              {% endif %}
            {% endfor %}
            
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- Right column -->
    <div class="col-sm-5" id="right">
      {% if searchBool == True %}
      <div id="myCarousel" class="carousel slide" data-ride="carousel" style="padding-bottom: 15px;">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
          <!-- <li data-target="#myCarousel" data-slide-to="2"></li>
          <li data-target="#myCarousel" data-slide-to="3"></li> -->
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
          <div class="item active">
            {{ div1 | safe }}
                {{ script1 | safe }}
          </div>

          <div class="item">
            {{ div2 | safe }}
                {{ script2 | safe }}
          </div>
          <div class="item">
            {{ div3 | safe }}
                {{ script3 | safe }}
          </div>
        </div>

        <!-- Left and right controls -->
        <!-- <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>

        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a> -->
      </div>
      {% endif %}
    </div>

    <div class="col-sm-1">
    </div>

  </div>

  <br>

  <!-- History Bar at bottom -->
  {% if searchBool == True %}
  <div class="row">
    <div class="col-sm-1">
    </div>

    <div class="col-sm-10">
      <!--print history -->
      <!--<pre id="history"><i><b>History:</b></i>   {% for search in history %}<a href="" type="submit"><b>{{ search }}</b></a> • {% endfor %}-->
        <!--<input id="search" type="text" name="search" placeholder="Search Keyword" class="form-control mr-sm-0">-->


      <form method="GET"  style="margin: 0; text-align: center;">
        {% csrf_token %}
        <pre id="history"><i><b>History:</b></i>  {% for search in history %}<input id="search" type="submit" name="search" value="{{ search }}" class="btn aqua-gradient btn-rounded btn-sm my-sm-3" style="padding-bottom: 2px; padding-top: 2px"></input> • {% endfor %}
        </pre>
      </form>
    </div>

    <div class="col-sm-1">
    </div>
  </div>
  {% endif %}
{% endblock content %}
